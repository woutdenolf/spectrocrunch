# Original script from https://github.com/silx-kit/pyFAI

os:
  - linux
#  - osx

language: python
python:
#  - "2.6"
  - "2.7"
#  - "3.2"
#  - "3.3"
#  - "3.4"
#  - "3.5"
#  - "nightly" 

branches:
  only:
  - master

addons:
  apt:
    packages:
      # Only used by the DISTRIB="ubuntu" setting
      #- libhdf5-serial-1.8.4
      #- libhdf5-serial-dev
      #- gfortran
      #- libatlas-base-dev
      #- libqtcore4
#For OpenCL:
      #- libboost-dev
      #- libboost-python-dev
      #- libboost-python
      - opencl-headers
      - python-pyopencl
# command to install dependencies

before_install:
  - "if [ ${TRAVIS_OS_NAME:-'linux'} = 'linux' ]; then . ./ci/before_install-linux.sh; fi"
#  - "if [ ${TRAVIS_OS_NAME:-'linux'} = 'osx' ]; then . ./ci/travis/before_install-osx.sh; fi"

install:
  - "python ci/info_platform.py"
  - "pip install --upgrade pip"
  - "pip install --upgrade -r ci/requirements_travis.txt"
  - "python setup.py build"
  - "python setup.py bdist_wheel"
  # Install the generated wheel package to test it
  - "pip install --pre --no-index --find-links dist/ Spectrocrunch"

# command to run tests
script:
  - "python setup.py test"
