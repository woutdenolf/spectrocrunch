sudo: required
dist: xenial

language: python

notifications:
  email: false

env:
  global:
  - CACHED_FOLDER=$HOME/cached
  - secure: "qD2Cdu6zHdr9eb4GmVKyflK5V52kNksH0gSlua44/VnUd+kQtgByievDgb32kiNIVrgQ5T6kYvAaCECUMqMxI6qW/LKvkLrdTMN+Q7HomgjI2CfoO/vzqzW5FP+HNAr8YTZ6tdPjeeMR18CfJv5FsOXEpKxVidM33ahXIMju4ndMUrv7yvSGp3i2osIaGTWGgXJHb9ONqLvLLGEnvQgQPXLayoQJE3JVO1xqAwpyMX4R/cCAeldNtdZbAe0qKveZt5n9bAvubpBbVI5NWhZdg7aabrpyVnfmmHGCqued2NUOwNW4zofSwicTRyTbBql5szIaR3WFWkZTX6sMEuh4mKB+vSfUkp5qOUYXfElzZlP/qUqqsjnkNd+Q07fRYI+YxJfKXYEnaeAnjtNwMT8plvuLZ47YOkq979ODzlj1pS0fMRWez0hTL1MJOuxU1fV0Mxvv0OMKzMXYyhXRLoWrFLjZYuqrmklBoGPbi7frIX/mzRwMhqjeTvF+UkyzIGpTPhNATyBVarW6sPmzzDGg0CJXmSrxSeal/BvXlSxX1A/9gsvRikrpQOwKjB0EZXXLv431ypnOVI3aDK1pOKyE9SQMHibbDmf3bCfATNEUpAEqTY+Te64ezgQy7oiD3P/kJx65KMyzbzsaOP7ZgvM5ZcY1487i913M+ErOMrBsFPw="

matrix:
  include:
    - python: 2.7
      os: linux
      env:
        - TRAVISRUN="unit"
    #- python: 3.5
    #  os: linux
    #  env:
    #    - TRAVISRUN="unit"
    - python: 3.6
      os: linux
      env:
        - TRAVISRUN="unit"
    #- python: 3.7
    #  os: linux
    #  env:
    #    - TRAVISRUN="unit"
    #- language: generic
    #  os: osx
    #  env:
    #    - TRAVISRUN="unit"
    #- python: 3.6
    #  os: linux
    #  env:
    #    - TRAVISRUN="style"

cache:
  timeout: 1000
  apt: true
  pip: true
  directories:
  - $CACHED_FOLDER

addons:
    apt:
        packages:
            - pandoc  # does not get install with script
            - libgl1-mesa-dev  # For OpenGL
            - libegl1-mesa  # Required by Qt xcb platform plugin
            - libxkbcommon-x11-0  # needed for Qt plugins
            - libxkbcommon0  # needed for Qt plugins
            - libxkbcommon-dev  # needed for Qt plugins

services:
- xvfb

before_install:
  - source $TRAVIS_BUILD_DIR/ci/travis-before-install.sh

install:
  - source $TRAVIS_BUILD_DIR/ci/travis-install-deps.sh

before_script:
  - source $TRAVIS_BUILD_DIR/ci/travis-build.sh

script:
  - source $TRAVIS_BUILD_DIR/ci/travis-test.sh
